<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Best Colleges by Course</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap">
    <style>
        /* Center align table header text */
        table thead th {
            text-align: center;
        }
    </style>
</head>
<body>
<div class="container">
    <h2 class="text-center mb-4 mt-4">Find Best Colleges by Course</h2>

    <form method="post" id="filter-form" class="row g-3 align-items-end mb-4">
        <div class="col-12 col-md-5">
            <label for="course" class="form-label">Select Course (required)</label>
            <select class="form-select" id="course" name="course" required>
                <option value="">-- Select Course --</option>
                {% for c in courses %}
                    <option value="{{ c }}" {% if selected_course == c %}selected{% endif %}>{{ c }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="col-12 col-md-5">
            <label for="state_filter" class="form-label">Filter by State (optional)</label>
            <select class="form-select" id="state_filter" name="state_filter">
                <option value="">All India</option>
                {% for s in states %}
                    <option value="{{ s }}" {% if selected_state == s %}selected{% endif %}>{{ s }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="col-12 col-md-2">
            <input type="hidden" id="top_n" name="top_n" value="{{ top_n }}">
            <button type="submit" class="btn btn-primary w-100">Show Colleges</button>
        </div>
    </form>

    <!-- Back to Home button -->
    <div class="mb-4">
        <a href="{{ url_for('home') }}" class="btn btn-secondary">
            ‚Üê Back to Home
        </a>
    </div>

    {% if error %}
    <div class="alert alert-warning">{{ error }}</div>
    {% endif %}

    {% if table_html %}
    <div id="best-colleges-table-container" class="table-responsive">
        {{ table_html | safe }}
    </div>
    {% else %}
    <div class="alert alert-info mt-4">
        {% if not error %}
            Above course not found in the selected state.
        {% endif %}
    </div>
    {% endif %}
</div>

<footer class="footer mt-4 py-3 bg-light border-top">
    <div class="container text-center">

        <div class="alert alert-warning mb-3 mx-auto" style="max-width: 700px; font-size: 0.9rem; line-height: 1.4;">
            <strong>Disclaimer:</strong> The college rankings are based on a composite score weighing average admission ranks and seat availability. 
            This score may not capture all factors influencing college quality or admission chances. Users are advised to consider additional criteria and official counseling information when making decisions.
        </div>

        <small class="text-muted d-block">
            NEET PG Seat Helper &copy; {{ 2025 }} &bull; Built with Flask &amp; SQLite
        </small>
    </div>
</footer>

<script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>
